---
title: "hw-05"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(gapminder)
library(ggplot2)
library(plotly)
library(tidyverse)
```

##Factors
Factors, like other vectors, can be manipulated with `dplyr` functions like arrange(). However, applying the arrange() function to factors doesn't alter their position in a `ggplot` figure. If we wanted to visualize life expectancy in Asian countries in 2007, the figure looks the same regardless of whether the data frame is arranged by life expectancy or country name. These changes only apply to the tabulated data.


```{r}
nlevels(gapminder$country)

americas_1997 <- gapminder %>% 
  filter(continent == "Americas", year == 1997)



americas_1997 %>% 
  arrange(gdpPercap) %>% 
  ggplot(aes(gdpPercap, country)) +
  geom_point()

#or
americas_1997 %>% 
  arrange(country) %>% 
  ggplot(aes(gdpPercap, country)) +
  geom_point()
```

Using the `forcats` package, factors can be manipulated in some useful ways. We can reorder the above figure to better represent the data (order)

```{r}

americas_1997 %>% 
    mutate(country = fct_reorder(country, gdpPercap)) %>% 
    ggplot(aes(gdpPercap, country)) + 
    geom_point()

  
```

We can see that, even with the countries outside of the Americas filtered off, the levels corresponding to those countries are still in the factor.
```{r}
americas_1997$country %>% 
  nlevels()
americas_1997$country %>% 
  head()
```

We can drop the unused levels

```{r}
americas_1997_americas_1997 %>% 
  mutate(country = fct_drop(country)) %>% 
  mutate(continent = fct_drop(continent)) %>% 
  str()
```

